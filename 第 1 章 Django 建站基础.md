## 1.1 网站的定义及组成

网站（Website）是指在因特网上根据**一定的规则**，使用 HTML（标准通用标记语言下的一个应用）等工具制作并用于展示特定内容相关网页的**集合**。在早期。域名、空间服务器与程序是网站的基本组成部分，随着科技的不断进步，网站地组成也日趋复杂，目前多数网站由域名、空间服务器、DNS 域名解析、网站程序和数据库等组成。

- 域名（Domain Name）：由一串用点分隔地字母组成，代表互联网上某一台计算机或计算机组地名称，用于在数据传输时标识计算机的电子方位，已经成为互联网的品牌和网上商标保护必备的产品之一。**通俗地说，域名就相当于一个家庭的门牌号码，别人通过这个号码可以很容易地找到你所在的位置。**
- 空间服务器-虚拟主机：是在网络服务器上划分出一定的磁盘空间供用户放置站点和应用组件等，提供必要的**站点功能、数据存放和传输功能**。也可以叫做“网络空间”，就是把一台运行在互联网上的服务器划分成多个“虚拟”的服务器。每一个虚拟主机都具有独立的域名和完整的 Internet 服务器（支持WWW、FTP、E-mail等）功能。**虚拟主机的租用类似于房屋租用**。
- 空间服务器-独立服务器：性能更强大、整体硬件完全独立的服务器，其 CPU 都在 8核以上
- 空间服务器-VPS：即**虚拟专用服务器**，是将一个服务器分区成多个虚拟独立专享服务器的技术。每个使用 VPS 技术的虚拟独立服务器拥有各自**独立的公网 IP 地址、操作系统、硬盘空间、内存空间和 CPU 资源**等，还可以进行安装程序、重启服务器等操作，与一台独立服务器完全相同。
- 网站程序：建设与修改网站所使用的编程语言，源代码是按一定格式书写的文字和符号编写的，可以是任何编程语言。

## 1.2 网站的分类

- 资讯门户类网站
- 企业品牌类网站
- 交易类网站
  - B2C（Business To Consumer）网站：商家--消费者，主要是购物网站，用于商家和消费者之间的买卖，如传统的百货商店和购物广场等。
  - B2B（Business To Business ）网站：商家--商家，主要是商务网站，用于商家之间的买卖，如传统的原材料市场和大型批发市场。
  - C2C （ConsumerTo Consumer）网站：消费者--消费者，主要是拍卖网站为主，用于个人物品的买卖，如传统的旧货市场、跳蚤市场、废品收购站等。
- 办公及政府机构网站
- 互动游戏网站
- 功能性网站，如Google 和 百度

## 1.3 网站运行原理及开发流程

### 网站中一些常用的术语

- 客户端：在计算机上运行并连接到互联网的应用程序，简称浏览器，如Chrome、Firefox和IE。用户通过操作客户端实现网站和用户之间的数据交互。
- 服务器：能连接到互联网且具有 IP 地址的**计算机**，服务器主要接收和处理用户的请求信息。当用户在客户端操作网页的时候，实质是向网站发送一个 HTTP 请求，网站的服务器接收到请求后会执行相应的处理，最后将处理结果返回到客户端并生成相应的网页信息。
- IP 地址：互联网协议地址，TCP/IP 网络设备（计算机、服务器、打印机、路由器等）的数字标识符。互联网上的每台计算机都有一个 IP 地址，用于识别和通信。IP 地址有 4 组数字，以小数点分隔（例如244.155.65.2），这被称为**逻辑地址**。为了在网络中定位设备，通过 TCP/IP 协议**将逻辑 IP 地址转换为物理地址**（物理地址即计算机里面的 MAC 地址）。
- 域名：用于标识一个或多个 IP 地址。
- DNS：域名系统，用于跟踪计算机的域名及其在互联网上相应的 IP 地址。
- ISP：互联网服务提供商。主要工作是在 DNS （域名系统）查找当前域名对应的 IP 地址。
- TCP/IP：传输控制协议/互联网协议，是广泛使用的通信协议。
- HTTP：超文本传输协议，是浏览器和服务器通过互联网进行通信的协议。

### 网站的运行原理

1. 在浏览器中输入网站地址，如 www.github.com。
2. 浏览器解析网站地址中包含的信息，如 HTTP 协议和域名（github.com）.
3. 浏览器与 ISP 通信，在 DNS 查找 <www.github.com> 所对应的 IP 地址，然后将 IP 地址发送到浏览器的 DNS 服务，最后向 <www.github.com> 的 IP 地址发送请求。
4. 浏览器从网站地址中获取 IP 地址和端口（HTTP 协议默认为端口 80，HTTPS 默认为端口 443），并打开 TCP 套接字连接，实现浏览器和 Web 服务器的连接。
5. 浏览器根据用户操作向服务器发送相应的 HTTP 请求，如打开 <www.github.com> 的主页面。
6. 当 Web 服务器接收请求后，根据请求信息查找该 HTML 页面。如果页面存在，则Web 服务器将处理结果和页面返回到浏览器。如果服务器找不到页面，将发送一个 404 错误信息，代表找不到相关的页面。

### 网站的开发流程

1. 需求分析：当拿到一个项目时，必须进行需求分析，清楚知道网站的类型、具体功能、业务逻辑以及网站的风格，此外还要确定域名、网站空间或者服务器以及网络备案等。
2. 规划静态内容：重新确定需求分析，并根据用户需求规划出网站的内容板块草图。
3. 设计阶段：根据网站草图，由美工制作成效果图。就好比建房子一样，首先画出效果图，然后才开始建房子，网站开发也是如此。
4. 程序开发阶段：根据草图划分页面结构和设计，前端和后台可以同时进行。前端根据美工效果负责制作静态页面；后台根据页面结构和设计，设计数据库数据结构和开发网站后台。
5. 测试和上线：在本地搭建服务器，测试网站是否存在 BUG。若无问题，则可以将网站打包，使用 FTP 上传至**网络空间或者服务器**。
6. 维护推广：在网站上线之后，根据实际情况完善网站的不足，定期修复和升级，保障网站运营顺畅，然后对网站进行推广宣传等。

## 1.4 走进 Django

Django 是一个开发源代码的 Web 应用框架。Django 采用了 MTV 的框架模式，即模型（Model）、模板（Template）和视图（Views），三者之间各自负责不同的职责。

- 模型，数据存取层，处理与数据相关的所有事务，例如如何存取、如何验证有效性、包含哪些行为以及数据之间的关系等。
- 视图，表现层，处理与表现相关的决定，例如如何在页面或其他类型文档中进行显示。
- 模板，业务逻辑层，存取模型及调取恰当模板的相关逻辑，模型与模板的桥梁。

Django 基于 MVC 的设计十分优美：

- 对象关系映射（Object Relational Mapping，ORM）：通过定义映射类来构建数据模型，将模型与关系数据库连接起来，使用 ORM 框架内置的数据库接口可实现复杂的数据操作。
- URL 设计：开发者可以设计任意的 URL （网站地址），而且还支持使用正则表达式设计。
- 模板系统：提供可扩展的模板语言，模板之间具有可继承性。
- 表单处理：可以生成各种表单模型，而且表单具有有效性检验功能。
- Cache 系统：完善的缓存系统，可以支持多种缓存方式。
- 用户管理系统：提供用户认证、权限设置和用户组功能，功能扩展性强。
- 国际化：内置国际化系统，方便开发出多种语言的网站。
- admin 管理系统：内置 admin 管理系统，系统扩展性强。

## 1.5 Django 2.0 的新特性

- Django 2.0 支持 Python 3.4、3.5和3.6，不再支持 Python 2，而 Django 1.11 是支持 Python 2.7 的最后版本。
- 简化 URL 路由语法：使得 Django.urls.path() 方法的语法更简单。**功能的导入由模块 Django.urls 实现**，如 from Django.urls import include,path,re_path
- admin 管理系统：支持主流的移动设备并**新增属性**  ModelAdmin.autocomplete_fields 和方法 ModelAdmin.get_autocomplete_fields()。
- 用户认证：PBKDF 2 密码哈希默认的迭代次数从 36000 增加到 100 000.
- Cache （缓存）：cache.set_many() 现在返回一个列表，包含了插入失败的键值。
- 通用视图：ContextMixin.extra_context 属性允许在 View.as_view() 中添加上下文。
- Pagination（分页）：增加 Paginator.get_page()，可以处理各种非法页面参数，放置异常。
- Templates（模板）：提高 Engine.get_default() 在第三方模块的用途。
- Validators（验证器）：不允许 CharField 及其子类的表单输入为空。
- File Storage（文件存储）：File.open() 可以用于上下文管理器，例如 with file.open() as f。
- 连接 MySQL 不再使用 mysqldb 模块，**改用为 mysqlclient**，两者之间并没有太大的使用差异。
- Management Commands（管理命令）：inspectdb 将 MySQL 的无符号整数视作 PositiveIntegerField 或者 PositiveSmallIntegerField 字段类型。

## 1.6 安装 Django

注：在安装 Django 之前，首先安装 Python，在官网上下载安装包安装即可。

方法一：

使用 pip 进行安装，按快捷键 Windows + R 打开运行对话框，然后在对话框中输入 cmd 并按回车键，进行命令提示符（也称为终端）。在命令提示符下输入以下安装指令：

```python
pip install Django
# 可以指定安装版本号 Django后面接版本号就可以了：
pip install django==2.0.1
```

方法二：

可以在网上下载 Django 的按转包自行安装。然后将下载的文件放到 E 盘，并打开 CMD（命令提示符）窗口，输入以下安装指令，输入指令后按回车键，等待安装完成的提示即可。

```python
pip install E:\Django-2.0.1-py3-none-any.whl
```

两种不同的安装方法都是使用 pip 执行的，唯一不同在于前者在安装过程中会从互联网下载安装包，而后者直接对本地已下载的安装包进行解压安装。Django 安装后，在 Python 交互解释器模式校验安装是否成功：

```python
>>> import django
>>> django.__version__
'2.0.1'
```

注：如何进行Python 交互解释器？打开 CMD 窗口，输入“python”并按回车键，进行Python 交互解释器，在交互解释器输入上面的校验代码。

## 1.7 创建项目

### 创建项目，分析文件

进行安全目录，在 CMD 窗口下输入项目创建指令：

```python
# MyDjango 是项目名称，可自行命名
django-admin startproject MyDjango
```

项目 MyDjango 结构：

[如何使用tree命令生成目录结构树](https://jingyan.baidu.com/article/3c343ff7e1609c0d36796379.html)

```
MyDjango
│  manage.py
│  
└─MyDjango
        settings.py
        urls.py
        wsgi.py
        __init__.py
```

项目 MyDjango 中包含 MyDjango 文件夹和 manage.py 文件，而 MyDjango文件夹又包含 4 个 .py 文件。文件说明如下。

- manage.py：命令行工具，允许以多种方式与项目进行交互。在 CMD 窗口下，将路径切换到 MyDjango 项目并输入 python manage.py help，可以查看该工具的具体功能。
- `__init__.py`：初始化文件，一般情况下无须修改。
- settings.py：项目的配置文件，具体配置说明会在下一章详细讲述。
- urls.py：项目的 URL 配置，可理解为网站的地址信息。
- wsgi.py：全称为 Python Web Server Gateway Interface，即 Python 服务器网关接口，是 Python 应用与 Web 服务器之间的接口，用于 Django 项目在服务器上的部署和上线，一般不需要修改。

### 创建项目应用

创项目应用，项目应用简称为App，相当于网站的功能，每个App 代表网站的一个或多个网页。App 的创建由文件 manage.py 实现，创建指令如下：

```python
# python manage.py startapp XXX
# 创建网站首页
python manage.py startapp index
```

项目目录结构：

```
MyDjango
│  manage.py
│  
├─index
│  │  admin.py
│  │  apps.py
│  │  models.py
│  │  tests.py
│  │  views.py
│  │  __init__.py
│  │  
│  └─migrations
│          __init__.py
│          
└─MyDjango
    │  settings.py
    │  urls.py
    │  wsgi.py
    │  __init__.py
    │  
    └─__pycache__
            settings.cpython-36.pyc
            __init__.cpython-36.pyc
```

在 index 文件夹可以看到有多个 .py 文件和 migrations 文件夹，说明如下：

- migrations：用于数据库数据的迁移
- `__init__.py`：初始化文件
- admin.py：当前 App 的后台管理系统。
- apps.py：当前 App 的配置信息，在 Django 1.9 版本后自动生成，一般情况下无须修改。
- models.py：定义映射类关联数据库，实现数据持久化，即 MTV 里面的模型（Model）。
- tests.py：自动化测试的模块。
- views.py：逻辑处理模块，即 MTV 里面的视图（views）。

### 启动项目

在 CMD 窗口输入以下指令启动项目：

```python
# 其中 80 是端口号，如果不设置端口，默认为 8000，最后在浏览器上输入 http://127.0.0.1:80/
# http://localhost:80/
python manage.py runserver 80
```

## 1.8 PyCharm 搭建开发环境

- [Pycharm搭建Django开发环境](https://www.cnblogs.com/yinzhengjie/p/10124753.html)
